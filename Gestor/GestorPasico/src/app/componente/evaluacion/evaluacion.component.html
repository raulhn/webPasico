
<div class ="container">


    <div  *ngIf="bCargados_trimestres">
        <ng-select [items]="lista_trimestres"
                    bindLabel="descripcion"
                    bindValue="nid_trimestre"
                    [(ngModel)]="trimestre_seleccionado">
        </ng-select>
    </div>

    <div *ngIf="trimestre_seleccionado != ''">
        <div *ngIf="bCargada_asignaturas">
            <ng-select [items]="lista_asignaturas"
                                bindLabel="descripcion" 
                                bindValue="nid"
                                [(ngModel)]="asignatura_seleccionada"
                                [compareWith]="compare_asignatura" (ngModelChange)="cambia_asignatura()">
            </ng-select>
        </div>

        <div *ngIf="bCargados_profesores">
            <ng-select [items]="lista_profesores"
                                bindLabel="etiqueta" 
                                bindValue="nid_persona"
                                [(ngModel)]="profesor_seleccionado"
                                [compareWith]="compare_profesor"
                                (ngModelChange)="cambia_profesor()">
            </ng-select>
        </div>


            
            <div *ngIf="bCargados_alumnos">
                <table class="table">
                    <thead>
                        <tr class="d-flex">
                            <th class="col-2">
                                Nombre
                            </th>
                            <th class="col-2">
                                Primer Apellido
                            </th>
                            <th class="col-2">
                                Segundo Apellido
                            </th>
                            <th class="col-1">
                                Nota
                            </th>
                            <th class="col-2">
                                Progreso
                            </th>
                            <th class="col-3">
                                Comentario
                            </th>
                        </tr>
                    </thead>
                    <tr *ngFor="let alumno of lista_alumnos" class="d-flex">
                        <td class="col-2"> {{alumno['nombre']}} </td>
                        <td  class="col-2">  {{alumno['primer_apellido']}} </td>
                        <td  class="col-2">  {{alumno['segundo_apellido']}}</td>
                        <td  class="col-1"> <input type="text" class="form-control pe-2" [(ngModel)]="lista_notas[alumno['nid']]"/> </td>
                        <td  class="col-2"> 
                            <select class="form-select" [(ngModel)]="lista_progreso[alumno['nid']]">
                                <option  value=0>Progresa Adecuadamente</option>
                                <option value=1>Necesita Mejorar</option>
                            </select>
                        </td>
                        <td class="col-3">
                        
                            <textarea class="form-control" [(ngModel)]="lista_comentarios[alumno['nid']]" rows="4" cols="50"> </textarea>
                        </td>
                    </tr>
                </table>
            </div>

            <button class="btn btn-primary mb-3 mt-2 tp-3" (click)="guardar()"> Guardar </button>
      
    </div>
</div>